<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Rigging Workflow | MoraMapGen </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Rigging Workflow | MoraMapGen ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/BlackOpsBen/Nemesis/blob/feature/Documentation/Library/PackageCache/com.unity.animation.rigging@1.2.1/Documentation~/RiggingWorkflow.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../logo.svg" alt="MoraMapGen">
            MoraMapGen
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="rigging-workflow">Rigging Workflow</h1>

<p>This document describes all of the steps and components required to create a custom Animation Rig. This <a href="https://youtu.be/DzW_jQGO1dc"><strong>video</strong></a> also demonstrates the process.</p>
<h2 id="core-components">Core Components</h2>
<p>Animation Rigs in Unity make use of four key components:</p>
<ul>
<li><strong>Animator:</strong> When added to some root GameObject, this built-in component designates that a hierarchy is animatable. <em>Animation Rigging works on top of Unity's animation system, and so requires an Animator.</em></li>
<li><strong>Rig Builder:</strong> When added to the root GameObject, this component allows the animated hierarchy to be modified by one or more Rigs, which it assembles into layers.</li>
<li><strong>Rig:</strong> When added to GameObjects in an animatable hierarchy, Rigs act as containers for source objects and Constraints that modify the animated hierarchy's pose. You can adjust the weight of a Rig to control its contribution to the final pose.</li>
<li><strong>Constraints:</strong> When added to Rig GameObjects or their children, these components specify operations a Rig will perform.</li>
</ul>
<p>The following illustration depicts a schematic overview of the interdependencies among all of the required types of components.</p>
<p><img src="images/rig_setup/rig_setup_overview.png" alt="Rig Setup Overview"></p>
<p>Once you have added a Rig Builder component to an animatable hierarchy's root GameObject, you can create a Rig GameObject as a child of this root <em>(ex: Rig Setup)</em>. To enable animation rigging, the Rig GameObject must have a Rig component. To then connect the Rig to the Animator, you must assign this Rig component to a Rig Layer on the Rig Builder component.</p>
<p><img src="images/rig_setup/rig_setup.gif" alt="Rig Setup"></p>
<p>After you connect the Rig GameObject to the Rig Builder component, you can add rig elements (i.e., GameObjects with Constraint components) under the Rig GameObject hierarchy. Different rig elements can be organized and hierarchically structured to accommodate any rigging requirement.</p>
<p>Source objects for Constraints, such as Target Effectors or Hint Effectors, can be placed under their associated Rig GameObject. In the following illustration, <em>Left Leg IK</em> has a <strong>Two Bone IK Constraint</strong> component and is acting as a rig element. It is the parent of both the <em>LeftFootEffector</em> and <em>LeftLegHint</em> source objects.</p>
<p><img src="images/rig_setup/source_object_example.png" alt="Source Object Example"></p>
<h3 id="rig-builder-component">Rig Builder Component</h3>
<p>The Rig Builder component lives alongside the Animator component and creates a Playable Graph that is appended to the existing Animator state machine.
The Rig Builder component needs to be added to the GameObject that has the Animator component.  Rig Builder needs to affect the same hierarchy as the Animator.</p>
<p><img src="images/rig_builder/rig_builder_setup.gif" alt="Rig Builder Setup"></p>
<p>Using Rig Layers, the Rig Builder component allows for stacking of multiple Rigs that can be enabled/disabled at any time.</p>
<p><img src="images/rig_builder/rig_builder_layers.gif" alt="Rig Builder Layers"></p>
<h3 id="rig-component">Rig Component</h3>
<p>The Rig component is the main entry point for all Constraints in a given control rig.
Note there should only be one Rig component per control rig hierarchy, which you must assign to a Rig Layer on the Rig Builder component.
To use multiple control rigs with a single hierarchy, you must assign each Rig to a different Rig Layer, and enable/disable them independently.</p>
<p>From a technical standpoint, the main purpose of a Rig component is to collect all Constraint components in its local hierarchy.
The component generates an ordered list of <em>IAnimationJobs</em>, which are applied to the Animator's pose after its normal evaluation.
The Rig component gathers constraints using <em>GetComponentsInChildren</em>, and so the order of components in the Rig's hierarchy determines the evaluation order of the jobs.
This method follows depth-first traversal as shown below:</p>
<p><img src="images/rig/eval_order.png" alt="Rig Constraint Evaluation Order"></p>
<p>In other words, grouping constraints under a GameObject allows you to manage the evaluation order of these constraints
by modifying the hierarchy.</p>
<p>Control rig hierarchies should hold all the necessary rig elements such as effectors, constraints, and other objects/elements required by the constraint definitions.
The root of a control rig hierarchy should be at the same level as the skeleton root, both under the Game Object holding the Animator.
<em>In other words, it should not be in the skeleton hierarchy, but rather live beside it.</em></p>
<p><img src="images/rig/rig_setup.gif" alt="Rig Setup"></p>
<p><img src="images/rig/rig_weight.gif" alt="Rig Weight"></p>
<p>Rig components, like all Constraint components, have a Weight property that can be used, animated, and scripted to enable/disable
or ease-in/ease-out an entire control rig hierarchy.</p>
<h2 id="other-utilities">Other Utilities</h2>
<h3 id="bone-renderer-component">Bone Renderer Component</h3>
<p>The Bone Renderer component allows you to define a transform hierarchy to be drawn as bones for visualization and selection during the rigging process.
These bones are not visible in the Game view. This allows you to define your character deformation skeletons for rigging purposes.</p>
<p><img src="images/bone_renderer/bone_renderer_setup.gif" alt="Bone Renderer Setup">
<img src="images/bone_renderer/bone_renderer_component.gif" alt="Bone Renderer Component"></p>
<p>You can customize the appearance of the bones by modifying Bone Size, Shape and Color.
The package provides these default shapes: Line, Pyramid, and Box.
You can also display tripods of local axes and adjust their size to suit your preference.</p>
<p><img src="images/bone_renderer/bone_looks.png" alt="Bone Look Pyramid"></p>
<h3 id="rig-effectors">Rig Effectors</h3>
<p>Similarly to bones, Rig Effectors allow you to add gizmos to transforms for visualization and selection.
You can add them to any transform in the same hierarchy as a Rig Builder or Rig component.
Like bones, Effectors are not visible in the Game view.
A special Scene View overlay allows you to manage and customize effectors in the Rig hierarchy.</p>
<p><img src="images/rig_effector/rig_effector_setup.gif" alt="Rig Effector Overlay"></p>
<p>You can also customize the appearance of the effectors by modifying Effector Size, Shape, Color, Offset Position and Offset Rotation.
The shape can be any Mesh asset available in the project.
You can create, delete, or edit multiple effectors at once.</p>
<p><img src="images/rig_effector/rig_effector_shapes.png" alt="Rig Effector Shapes"></p>
<h3 id="rig-transform">Rig Transform</h3>
<p>When a specific GameObject in your rig's hierarchy is important for manipulation but not referenced by any rig constraints, you must add a <strong>RigTransform</strong> component, found under <em>Animation Rigging/Setup</em>.
As shown in the video below, in order to manipulate both the left and right foot IK targets (<em>lfik</em> and <em>rfik</em>) of the <em>2BoneIK</em> sample using
their parent transform (<em>ik</em> ), you must add this component to get the expected behavior.</p>
<p><img src="images/rig_transform/rig_transform_manipulation.gif" alt="Rig Transform"></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/BlackOpsBen/Nemesis/blob/feature/Documentation/Library/PackageCache/com.unity.animation.rigging@1.2.1/Documentation~/RiggingWorkflow.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
